(self.webpackChunkwhiteboard_bridge=self.webpackChunkwhiteboard_bridge||[]).push([[179],{89734:function(e,t,n){"use strict";n.r(t)},46700:function(e,t,n){var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":79199,"./az.js":79199,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":94001,"./de-at.js":94001,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":2088,"./es-do.js":2088,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":82380,"./ug-cn.js":82380,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=46700},6167:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,o.useEffect)((function(){return function(){window.removeEventListener("error",a.globalErrorEvent),window.removeEventListener("message",a.postCustomMessage)}}),[]),window.addEventListener("error",a.globalErrorEvent),window.addEventListener("message",a.postCustomMessage);var e=(0,o.useRef)(null);return(0,i.setWhiteboardDivGetter)((function(){return e.current})),o.default.createElement("div",{id:c,ref:e,style:{position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:1}})},t.whiteboardContainerId=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(28388),i=n(5294);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}n(19418),n(89734),n(75735);var c="whiteboard-container";t.whiteboardContainerId=c},24433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDebugFunctions=function(){window.testRoom=function(){(0,r.enableReport)(!0);var e={log:!0,userCursor:!0,__platform:"bridge",appIdentifier:"",useMultiViews:!0};window.newWhiteSdk(e,(function(){}));var t={uuid:"",uid:"0",roomToken:"",userPayload:{avatar:"https://white-pan.oss-cn-shanghai.aliyuncs.com/40/image/mask.jpg"}};window.joinRoom(t,(function(){}))},window.testReplay=function(){(0,r.enableReport)(!0);var e={log:!0,userCursor:!0,__platform:"bridge",appIdentifier:"",useMultiViews:!0};window.newWhiteSdk(e,(function(){}));var t={room:"",roomToken:""};window.replayRoom(t,(function(){}))}};var r=n(38789)},87670:function(){"use strict";"undefined"==typeof Proxy&&(window.__netlessMobXUseProxies="ifavailable")},59048:function(e,t,n){"use strict";n(35827),n(57147);var r=n(86254);window.ResizeObserver||(window.ResizeObserver=r.ResizeObserver),window.globalThis||(window.globalThis=window)},39310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rtc=void 0;var r=n(70396);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"startCallback",void 0),a(this,"stopCallback",void 0),a(this,"startAudioMixing",(function(e,n,o,a,i){return t.startCallback=i,(0,r.call)("rtc.startAudioMixing",{filePath:e,loopback:n,replace:o,cycle:a}),0})),a(this,"stopAudioMixing",(function(e){return t.stopCallback=e,(0,r.call)("rtc.stopAudioMixing"),0})),(0,r.register)("rtc",{callback:function(n,r){switch(n){case e.kStopAudioMixing:t.stopCallback&&t.stopCallback(n,r);break;case e.kStartAudioMixing:t.startCallback&&t.startCallback(n,r);break;default:t.startCallback?t.startCallback(n,r):t.stopCallback&&t.stopCallback(n,r)}}})}var t,n,i;return t=e,(n=[{key:"pauseAudioMixing",value:function(){return(0,r.call)("rtc.pauseAudioMixing"),0}},{key:"resumeAudioMixing",value:function(){return(0,r.call)("rtc.resumeAudioMixing"),0}},{key:"setAudioMixingPosition",value:function(e){return(0,r.call)("rtc.setAudioMixingPosition",e),0}}])&&o(t.prototype,n),i&&o(t,i),e}();t.Rtc=i,a(i,"kStartAudioMixing",710),a(i,"kStopAudioMixing",713),a(i,"kAudioError",714)},32407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketBridge=void 0;var r,o,a=n(70396);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(r||(r={})),o=WebSocket,WebSocket=function(e,t){return window.nativeWebSocket?new l(e):new o(e,t)};var u=0,l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"binaryType","blob"),s(this,"key",void 0),s(this,"_readyState",r.CONNECTING),s(this,"_bufferedAmount",0),s(this,"listeners",{}),s(this,"onceListeners",{}),s(this,"_onError",(function(e){n.key===e.key&&(console.log("_onError: ",e),n.dispatchEvent("error",e))})),s(this,"_onMessage",(function(e){n.key===e.key&&("arraybuffer"===e.type?n.dispatchEvent("message",{data:c(e.data),key:n.key}):n.dispatchEvent("message",{data:e.data,key:n.key}))})),s(this,"_onClose",(function(e){n.key===e.key&&(console.log("_onClose: ",e),n._readyState=r.CLOSED,n.dispatchEvent("close",e))})),s(this,"_onOpen",(function(e){n.key===e.key&&(console.log("_onOpen"),n._readyState=r.OPEN,n.dispatchEvent("open",{}))})),this.key=u,u+=1,this.registerBridge(),(0,a.call)("ws.setup",{url:t,key:this.key})}var t,n,o;return t=e,(n=[{key:"send",value:function(e){if(e instanceof ArrayBuffer){var t=function(e){for(var t=new Uint8Array(e),n="",r=t.length,o=0;o<r;o++)n+=String.fromCharCode(t[o]);return window.btoa(n)}(e);(0,a.call)("ws.send",{data:t,type:"arraybuffer",key:this.key})}else(0,a.call)("ws.send",{data:e,type:"string",key:this.key})}},{key:"close",value:function(e,t){console.log("close: ",{code:e,reason:t}),this._readyState=r.CLOSING,(0,a.call)("ws.close",{code:e,reason:t,key:this.key})}},{key:"addEventListener",value:function(e,t,n){this.listeners[e]=this.listeners[e]||[],this.onceListeners[e]=this.onceListeners[e]||[],n&&!0!==n&&n.once?this.onceListeners[e].push(t):this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t,n){if(e in this.listeners){for(var r=this.listeners[e],o=0,a=r.length;o<a;o++)if(r[o]===t){r.splice(o,1);break}for(var i=this.onceListeners[e],s=0,c=i.length;s<c;s++)if(i[s]===t){i.splice(s,1);break}}}},{key:"dispatchEvent",value:function(e,t){if(!(e in this.listeners))return!0;for(var n=this.listeners[e].slice(),r=0,o=n.length;r<o;r++)n[r].call(this,t);for(var a=this.onceListeners[e].slice(),i=0,s=a.length;i<s;i++)a[i].call(this,t),a.splice(i,1);return!0}},{key:"registerBridge",value:function(){(0,a.register)("ws",{onError:this._onError,onMessage:this._onMessage,onClose:this._onClose,onOpen:this._onOpen})}},{key:"readyState",get:function(){return this._readyState}},{key:"bufferedAmount",get:function(){return this._bufferedAmount}}])&&i(t.prototype,n),o&&i(t,o),e}();t.WebSocketBridge=l},16139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDisplayerBridge=function(e){(0,o.register)(m,new v(e)),(0,o.registerAsyn)(g,new b(e)),(0,s.addBridgeLogHook)([m,g],u.logger)},t.DisplayerBridge=t.AsyncDisplayerBridge=void 0;var r,o=n(70396),a=n(51126),i=(r=n(61120))&&r.__esModule?r:{default:r},s=n(28388),c=n(6167),u=n(38789);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var m="displayer",g="displayerAsync";function y(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){t(this.result)},n.readAsDataURL(e)}))}))}function h(e,t,n){var r=document.createElement("div");r.setAttribute("class","shadow");var o,a=document.getElementById(c.whiteboardContainerId);if(a){var s=window.getComputedStyle(a).backgroundColor;r.style.background=s}document.body.appendChild(r),t(e,r,r.clientWidth,r.clientHeight),(0,i.default)(r,{useCORS:!0,onclone:(o=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,s,"next",e)}function s(e){p(a,r,o,i,s,"throw",e)}i(void 0)}))}}(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.from(t.getElementsByTagName("image")),r=0,o=n;case 2:if(!(r<o.length)){e.next=13;break}return a=o[r],s=(i=a).href.baseVal,e.next=8,y(s);case 8:c=e.sent,i.href.baseVal=c;case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}).then((function(e){var t=e.toDataURL();document.body.removeChild(r),n(t)}))}window.setBackgroundColor=function(e,t,n,r){var o=document.getElementById(c.whiteboardContainerId);if(o){var a="rgb(".concat(e,", ").concat(t,", ").concat(n,")");o.style.background=a}else console.log(c.whiteboardContainerId,"not exist")};var b=function e(t){var n=this;f(this,e),this.aDisplayer=t,d(this,"sceneSnapshot",(function(e,t){h(e,n.aDisplayer.fillSceneSnapshot.bind(n.aDisplayer),t)})),d(this,"scenePreview",(function(e,t){h(e,n.aDisplayer.scenePreview.bind(n.aDisplayer),t)}))};t.AsyncDisplayerBridge=b;var v=function(){function e(t){var n=this;f(this,e),this.aDisplayer=t,d(this,"postMessage",(function(e){var t={name:"parentWindow",payload:e},n=document.getElementsByTagName("iframe");n.length>0&&n[0].contentWindow?n[0].contentWindow.postMessage(t,"*"):0==n.length?(0,u.logger)("postmessage fail","no frames exist"):(0,u.logger)("postmessage fail","no content Window")})),d(this,"scaleIframeToFit",(function(){var e=n.aDisplayer.getInvisiblePlugin("IframeBridge");e&&e.scaleIframeToFit()})),d(this,"setDisableCameraTransform",(function(e){n.aDisplayer.disableCameraTransform=e})),d(this,"getDisableCameraTransform",(function(){return n.aDisplayer.disableCameraTransform})),d(this,"setCameraBound",(function(e){var t=(0,a.convertBound)(e);n.aDisplayer.setCameraBound(t)})),d(this,"getMemberState",(function(e){return JSON.stringify(n.aDisplayer.memberState(e))})),d(this,"getWindowManagerAttributes",(function(){var e,t;return JSON.parse(JSON.stringify(null===(e=window.manager)||void 0===e||null===(t=e.appManager)||void 0===t?void 0:t.attributes))})),d(this,"scenePathType",(function(e){return n.aDisplayer.scenePathType(e)})),d(this,"entireScenes",(function(){return n.aDisplayer.entireScenes()})),d(this,"getScene",(function(e){return n.aDisplayer.getScene(e)})),d(this,"moveCamera",(function(e){n.aDisplayer.moveCamera(e)})),d(this,"moveCameraToContain",(function(e){n.aDisplayer.moveCameraToContain(e)})),d(this,"refreshViewSize",(function(){n.aDisplayer.refreshViewSize()})),d(this,"scalePptToFit",(function(e){n.aDisplayer.scalePptToFit(e)})),d(this,"convertToPointInWorld",(function(e,t){return n.aDisplayer.convertToPointInWorld({x:e,y:t})})),d(this,"setBackgroundColor",(function(e,t,n,r){var o=document.getElementById(c.whiteboardContainerId),a="rgb(".concat(e,", ").concat(t,", ").concat(n,")");o.style.background=a})),d(this,"addHighFrequencyEventListener",(function(e,t){n.aDisplayer.addMagixEventListener(e,(function(e){var t=n.aDisplayer.uuid||n.aDisplayer.roomUUID,r=e.map((function(e){return{uuid:t,eventName:e.event,payload:e.payload,scope:e.scope,authorId:e.authorId}}));(0,s.isRoom)(n.aDisplayer)?(0,o.call)("room.fireHighFrequencyEvent",JSON.stringify(r)):(0,o.call)("player.fireHighFrequencyEvent",JSON.stringify(r))}),t)})),d(this,"addMagixEventListener",(function(e){n.aDisplayer.addMagixEventListener(e,(function(e){var t={uuid:n.aDisplayer.uuid||n.aDisplayer.roomUUID,eventName:e.event,payload:e.payload,scope:e.scope,authorId:e.authorId};(0,s.isRoom)(n.aDisplayer)?(0,o.call)("room.fireMagixEvent",JSON.stringify(t)):(0,o.call)("player.fireMagixEvent",JSON.stringify(t))}))})),d(this,"removeMagixEventListener",(function(e){n.aDisplayer.removeMagixEventListener(e)}))}var t,n,r;return t=e,(n=[{key:"setTeleBoxTheme",value:function(e){var t;null===(t=window.manager)||void 0===t||t.teleboxManager.setTheme(e)}},{key:"setPrefersColorScheme",value:function(e){var t;null===(t=window.manager)||void 0===t||t.setPrefersColorScheme(e)}}])&&l(t.prototype,n),r&&l(t,r),e}();t.DisplayerBridge=v},15581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addManagerListener=function(e,t,n){window.manager=e,function(e){return void 0!==e.onRoomStateChanged}(n)?function(e,t,n){e.emitter.on("cameraStateChange",(function(e){n.onRoomStateChanged({cameraState:e})})),e.emitter.on("sceneStateChange",(function(e){(0,r.call)("room.fireRoomStateChanged",JSON.stringify({sceneState:e}))})),e.emitter.on("boxStateChange",(function(e){n.onRoomStateChanged({windowBoxState:e})})),e.emitter.on("pageStateChange",(function(e){n.onRoomStateChanged({pageState:e})})),e.emitter.on("canRedoStepsChange",(function(e){n.onCanRedoStepsUpdate(e)})),e.emitter.on("canUndoStepsChange",(function(e){n.onCanUndoStepsUpdate(e)})),e.emitter.on("loadApp",(function(e){t("loadApp",e)}))}(e,t,n):function(e,t,n){e.emitter.on("cameraStateChange",(function(e){n.onPlayerStateChanged({cameraState:e})})),e.emitter.on("sceneStateChange",(function(e){(0,r.call)("player.onPlayerStateChanged",JSON.stringify({sceneState:e}))})),e.emitter.on("boxStateChange",(function(e){n.onPlayerStateChanged({windowBoxState:e})})),e.emitter.on("pageStateChange",(function(e){n.onPlayerStateChanged({pageState:e})})),e.emitter.on("loadApp",(function(e){t("loadApp",e)}))}(e,t,n)};var r=n(70396)},82969:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlayerBridge=function(e,t,n,l){window.player=e,window.combinePlayer=t,(0,o.registerDisplayerBridge)(e),(0,c.registerAsyn)(u.playerNameSpace,new g(e,t)),(0,c.register)(u.playerStateNameSpace,new m(e,t)),(0,i.addBridgeLogHook)([u.playerNameSpace,u.playerStateNameSpace],s.logger),t&&t.setOnStatusChange((function(e,t){switch(n.time=0,e){case a.PublicCombinedStatus.Pause:l.onPhaseChanged(r.PlayerPhase.Pause);break;case a.PublicCombinedStatus.PauseBuffering:case a.PublicCombinedStatus.PauseSeeking:case a.PublicCombinedStatus.PlayingBuffering:case a.PublicCombinedStatus.PlayingSeeking:l.onPhaseChanged(r.PlayerPhase.Buffering);break;case a.PublicCombinedStatus.Ended:l.onPhaseChanged(r.PlayerPhase.Ended);break;case a.PublicCombinedStatus.Playing:l.onPhaseChanged(r.PlayerPhase.Playing);break;case a.PublicCombinedStatus.Disabled:l.onStoppedWithError(new Error(t))}}))},t.PlayerAsyncBridge=t.PlayerStateBridge=void 0;var r=n(63314),o=n(16139),a=n(45387),i=n(28388),s=n(38789),c=n(70396),u=n(11358);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function e(t,n){var r=this;d(this,e),this.player=t,this.combinePlayer=n,p(this,"roomUUID",(function(){return r.player.roomUUID})),p(this,"phase",(function(){return r.player.phase})),p(this,"playerState",(function(){try{var e=r.player.state;return window.manager&&(e=f(f(f({},e),{windowBoxState:window.manager.boxState}),{},{cameraState:window.manager.cameraState,sceneState:window.manager.sceneState})),e}catch(e){return{}}})),p(this,"isPlayable",(function(){return r.player.isPlayable})),p(this,"playbackSpeed",(function(){return r.combinePlayer?r.combinePlayer.playbackRate:r.player.playbackSpeed})),p(this,"timeInfo",(function(){var e=r.player;return{scheduleTime:e.progressTime,timeDuration:e.timeDuration,framesCount:e.framesCount,beginTimestamp:e.beginTimestamp}}))};t.PlayerStateBridge=m;var g=function e(t,n){var o=this;d(this,e),this.player=t,this.combinePlayer=n,p(this,"play",(function(){o.combinePlayer?o.combinePlayer.play():o.player.play()})),p(this,"pause",(function(){o.combinePlayer?o.combinePlayer.pause():o.player.pause()})),p(this,"stop",(function(){try{o.player.stop()}catch(e){console.log("stop:",e.message)}})),p(this,"seekToScheduleTime",(function(e,t){o.combinePlayer?(o.combinePlayer.seek(e),t&&setTimeout((function(){t(r.PlayerSeekingResult.Success)}),0)):o.player.seekToProgressTime(e).then((function(e){t&&t(e)}))})),p(this,"setObserverMode",(function(e){o.player.setObserverMode(e)})),p(this,"setPlaybackSpeed",(function(e){o.combinePlayer?o.combinePlayer.playbackRate=e:o.player.playbackSpeed=e}))};t.PlayerAsyncBridge=g},61558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBridgeRoom=function(e){window.room=e,(0,s.registerDisplayerBridge)(e),(0,c.register)(u.roomNamespace,new C),(0,c.registerAsyn)(u.roomNamespace,new _(e)),(0,c.register)(u.pptNamespace,new M(e)),(0,c.register)(u.roomSyncNamespace,new E(e)),(0,c.register)(u.roomStateNamespace,new A(e)),(0,a.addBridgeLogHook)([u.roomNamespace,u.pptNamespace,u.roomSyncNamespace,u.roomStateNamespace],i.logger)},t.RoomStateBridge=t.RoomAsyncBridge=t.RoomSyncBridge=t.RoomPPTBridge=t.RoomBridge=void 0;var r=n(10097),o=n(63314),a=n(28388),i=n(38789),s=n(16139),c=n(70396),u=n(11358);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){h=function(e,t){return new a(e,void 0,t)};var n=v(RegExp),r=RegExp.prototype,o=new WeakMap;function a(e,t,r){var a=n.call(this,e,t);return o.set(a,r||o.get(e)),a}function i(e,t){var n=o.get(t);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return b(a,n),a.prototype.exec=function(e){var t=r.exec.call(this,e);return t&&(t.groups=i(t,this)),t},a.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=o.get(this);return r[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof t){var a=this;return r[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!==l(e[e.length-1])&&e.push(i(e,a)),t.apply(this,e)}))}return r[Symbol.replace].call(this,e,t)},h.apply(this,arguments)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,j(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,e)},v(e)}function w(e,t,n){return w=S()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&P(o,n.prototype),o},w.apply(null,arguments)}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function k(e,t,n){var o=function(e){var t,n=e.map((function(e){return{name:e.name}})),r="",o="",a=h(/^pptx?(:\/\/[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+?dynamicConvert)\/([0-9A-Z_a-z]+)\//,{prefix:1,taskId:2}),i=g(e);try{for(i.s();!(t=i.n()).done;){var s=t.value.ppt;if(s&&s.src.startsWith("ppt")){var c=a.exec(s.src);if(c&&c.groups){r=c.groups.taskId,o="https"+c.groups.prefix;break}}}}catch(e){i.e(e)}finally{i.f()}return{scenesWithoutPPT:n,taskId:r,url:o}}(n),a=o.scenesWithoutPPT,s=o.taskId,c=o.url;try{return s&&c?window.manager.addApp({kind:"Slide",options:{scenePath:e,title:t,scenes:a},attributes:{taskId:s,url:c}}):window.manager.addApp({kind:r.BuiltinApps.DocsViewer,options:{scenePath:e,title:t,scenes:n}})}catch(e){return(0,i.logger)("addSlideApp error",e),Promise.reject()}}function O(e){e.getInvisiblePlugin("IframeBridge")&&e.getInvisiblePlugin("IframeBridge").computedZindex(),e.getInvisiblePlugin("IframeBridge")&&e.getInvisiblePlugin("IframeBridge").updateStyle()}var C=function e(){p(this,e),m(this,"setWindowManagerAttributes",(function(e){var t,n;null===(t=window.manager)||void 0===t||t.safeSetAttributes(e),null===(n=window.manager)||void 0===n||n.refresh()})),m(this,"setPrefersColorScheme",(function(e){var t;null===(t=window.manager)||void 0===t||t.setPrefersColorScheme(e)}))};t.RoomBridge=C;var M=function e(t){var n=this;p(this,e),this.room=t,m(this,"nextStep",(function(){n.room.pptNextStep()})),m(this,"previousStep",(function(){n.room.pptPreviousStep()}))};t.RoomPPTBridge=M;var E=function e(t){var n=this;p(this,e),this.room=t,m(this,"syncBlockTimestamp",(function(e){n.room.syncBlockTimestamp(e)})),m(this,"disableSerialization",(function(e){n.room.disableSerialization=e,e||null!=window.manager||((0,c.call)("room.fireCanUndoStepsUpdate",n.room.canUndoSteps),(0,c.call)("room.fireCanRedoStepsUpdate",n.room.canRedoSteps))})),m(this,"copy",(function(){n.room.copy()})),m(this,"paste",(function(){n.room.paste()})),m(this,"duplicate",(function(){n.room.duplicate()})),m(this,"delete",(function(){n.room.delete()})),m(this,"disableEraseImage",(function(e){n.room.disableEraseImage=e}))};t.RoomSyncBridge=E;var _=function e(t){var n=this;p(this,e),this.room=t,m(this,"redo",(function(e){e(n.room.redo())})),m(this,"undo",(function(e){e(n.room.undo())})),m(this,"canRedoSteps",(function(e){window.manager?e(window.manager.canRedoSteps):e(n.room.canRedoSteps)})),m(this,"canUndoSteps",(function(e){window.manager?e(window.manager.canUndoSteps):e(n.room.canUndoSteps)})),m(this,"setGlobalState",(function(e){n.room.setGlobalState(e)})),m(this,"setScenePath",(function(e,t){try{window.manager?window.manager.setMainViewScenePath(e):n.room.setScenePath(e),t(JSON.stringify({}))}catch(e){return t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}})),m(this,"addPage",(function(e,t){if(window.manager)window.manager.addPage(e).then((function(){t&&t()})).catch((function(e){if(t)return t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}));else{var r=n.room.state.sceneState.contextPath,o=e.after,a=e.scene||{},i=Array.isArray(a)?a:[a];if(o){var s=n.room.state.sceneState.index+1;n.room.putScenes(r,i,s)}else n.room.putScenes(r,i);t&&setTimeout((function(){t()}),0)}})),m(this,"removePage",(function(e,t){if(!window.manager){var r=n.room.state.sceneState.scenes,o=e.index||n.room.state.sceneState.index;if(1==r.length)return(0,i.logger)("removePage warning","can't remove the last page"),t(JSON.stringify({__error:{message:"removePage warning, can't remove the last page"}}));if(o<r.length){var a=n.room.state.sceneState.contextPath,s=a.endsWith("/")?a:a+"/";return n.room.removeScenes(s+r[o].name),t(!0)}return(0,i.logger)("removePage warning","index out of range"),t(JSON.stringify({__error:{message:"removePage warning, index out of range"}}))}window.manager.removePage(e.index).then((function(e){t(e)})).catch((function(e){return t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}))})),m(this,"nextPage",(function(e){if(window.manager)window.manager.nextPage().then((function(t){e(t)}));else{var t=n.room.state.sceneState.index+1;t<n.room.state.sceneState.scenes.length?(n.room.setSceneIndex(t),e(!0)):e(!1)}})),m(this,"prevPage",(function(e){if(window.manager)window.manager.prevPage().then((function(t){e(t)}));else{var t=n.room.state.sceneState.index-1;t>=0?(n.room.setSceneIndex(t),e(!0)):e(!1)}})),m(this,"setMemberState",(function(e){n.room.setMemberState(e)})),m(this,"setViewMode",(function(e){var t=o.ViewMode[e];void 0===t&&(t=o.ViewMode.Freedom),window.manager?window.manager.setViewMode(t):n.room.setViewMode(t)})),m(this,"setWritable",(function(e,t){n.room.setWritable(e).then((function(){t(JSON.stringify({isWritable:n.room.isWritable,observerId:n.room.observerId}))})).catch((function(e){t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}))})),m(this,"getMemberState",(function(e){return e(JSON.stringify(n.room.state.memberState))})),m(this,"getGlobalState",(function(e){return e(JSON.stringify(n.room.state.globalState))})),m(this,"getSceneState",(function(e){return e(JSON.stringify(n.room.state.sceneState))})),m(this,"getRoomMembers",(function(e){return e(JSON.stringify(n.room.state.roomMembers))})),m(this,"getPptImages",(function(e){var t=n.room.state.sceneState.scenes.map((function(e){return e.ppt?e.ppt.src:""}));return e(JSON.stringify(t))})),m(this,"setSceneIndex",(function(e,t){try{window.manager?window.manager.setMainViewSceneIndex(e):n.room.setSceneIndex(e),t(JSON.stringify({}))}catch(e){t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}})),m(this,"getScenes",(function(e){return e(JSON.stringify(n.room.state.sceneState.scenes))})),m(this,"getZoomScale",(function(e){var t=1;return t=window.manager?window.manager.mainView.camera.scale:n.room.state.cameraState.scale,e(JSON.stringify(t))})),m(this,"getBroadcastState",(function(e){return e(JSON.stringify(n.room.state.broadcastState))})),m(this,"getRoomPhase",(function(e){return e(n.room.phase)})),m(this,"disconnect",(function(e){n.room.disconnect().then((function(){e()}))})),m(this,"zoomChange",(function(e){n.room.moveCamera({scale:e})})),m(this,"disableCameraTransform",(function(e){n.room.disableCameraTransform=e})),m(this,"disableDeviceInputs",(function(e){window.manager&&window.manager.setReadonly(e),n.room.disableDeviceInputs=e,O(n.room)})),m(this,"disableOperations",(function(e){n.room.disableCameraTransform=e,n.room.disableDeviceInputs=e,O(n.room)})),m(this,"disableWindowOperation",(function(e){var t;null===(t=window.manager)||void 0===t||t.setReadonly(e)})),m(this,"putScenes",(function(e,t,r,o){n.room.putScenes(e,t,r),o(JSON.stringify(n.room.state.sceneState))})),m(this,"removeScenes",(function(e){n.room.removeScenes(e)})),m(this,"moveScene",(function(e,t){n.room.moveScene(e,t)})),m(this,"insertText",(function(e,t,r,o){window.manager?o(window.manager.mainView.insertText(e,t,r)):o(n.room.insertText(e,t,r))})),m(this,"cleanScene",(function(e){n.room.cleanCurrentScene(e)})),m(this,"insertImage",(function(e){n.room.insertImage(e)})),m(this,"insertVideo",(function(e){})),m(this,"completeImageUpload",(function(e,t){n.room.completeImageUpload(e,t)})),m(this,"dispatchMagixEvent",(function(e){n.room.dispatchMagixEvent(e.eventName,e.payload)})),m(this,"setTimeDelay",(function(e){n.room.timeDelay=e})),m(this,"addApp",(function(e,t,n,o){if(window.manager)if("Slide"===e){var a=n||{},i=a.taskId,s=a.url;if(i&&s)window.manager.addApp({kind:e,options:t,attributes:n}).then((function(e){o(e)}));else{var c=t;k(c.scenePath,c.title,c.scenes).then((function(e){o(e)}))}}else{var u=e;"MediaPlayer"==e?u=r.BuiltinApps.MediaPlayer:"DocsViewer"==e&&(u=r.BuiltinApps.DocsViewer),window.manager.addApp({kind:u,options:t,attributes:n}).then((function(e){o(e)}))}})),m(this,"closeApp",(function(e,t){window.manager&&window.manager.closeApp(e).then((function(){return t(void 0)}))}))};t.RoomAsyncBridge=_;var A=function e(t){var n=this;p(this,e),this.room=t,m(this,"getRoomState",(function(){var e=n.room.state;return window.manager?d(d(d({},e),{windowBoxState:window.manager.boxState}),{},{cameraState:window.manager.cameraState,sceneState:window.manager.sceneState},{pageState:window.manager.pageState}):d(d({},e),(0,a.createPageState)(e.sceneState))})),m(this,"getTimeDelay",(function(){return n.room.timeDelay})),m(this,"getPhase",(function(){return n.room.phase})),m(this,"isWritable",(function(){return n.room.isWritable})),m(this,"debugInfo",(function(){try{var e=n.room.screen,t=e.camera,r=e.visionRectangle,o=e.adaptedRectangle,a=e.divElement;return{camera:t,visionRectangle:r,adaptedRectangle:o,divWidth:a.clientWidth,divHeight:a.clientHeight}}catch(e){return{error:e.message}}}))};t.RoomStateBridge=A},5294:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setWhiteboardDivGetter=function(e){U=e},t.registerSDKBridge=function(){var e=new ne;(0,s.registerAsyn)("sdk",e),window.newWhiteSdk=e.newWhiteSdk,window.joinRoom=e.joinRoom,window.replayRoom=e.replayRoom,(0,j.addBridgeLogHook)(["sdk"],v.logger)},t.sdkCallbackHandler=void 0,n(36289);var o,a=n(54505),i=n(99863),s=n(70396),c=n(63314),u=n(9207),l=n(99256),f=n(37223),d=n(63813),p=n(98279),m=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=I();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(26728)),g=n(35976),y=n(10097),h=n(99711),b=n(35623),v=n(38789),w=n(51126),S=n(15581),P=n(42470),j=n(28388),k=n(15748),O=(o=n(45387))&&o.__esModule?o:{default:o},C=n(61558),M=n(82969),E=n(39310),_=n(25219),A=n(97839);function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}function x(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=T(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function T(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,s,"next",e)}function s(e){L(a,r,o,i,s,"throw",e)}i(void 0)}))}}var U,H=void 0,z=void 0,V=void 0,G=new E.Rtc,K=void 0,$=void 0,q=new _.SDKCallbackHandler;t.sdkCallbackHandler=q;var X="whiteboard-native-css",Z="whiteboard-native-font-face";(0,c.setAsyncModuleLoadMode)(c.AsyncModuleLoadMode.StoreAsBase64);function Y(){window.manager?(window.manager.destroy(),window.manager=void 0,z=void 0,V=void 0):z?(z.bindHtmlElement(null),z=void 0):V&&(V.bindHtmlElement(null),V=void 0),window.syncedStore&&(0,A.destroySyncedStore)()}function Q(e,t){return ee.apply(this,arguments)}function ee(){return(ee=J(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.WindowManager.mount(B(B({cursor:!!$},t),{},{container:U()}));case 2:return r=e.sent,(0,S.addManagerListener)(r,v.logger,n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return void 0!==e&&(e.scrollVerticalOnly||!1)?"scroll":void 0}var ne=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"newWhiteSdk",(function(e){var t=e.enableInterrupterAPI?function(e){var t=q.onUrlInterrupter(e);return t.length>0?t:e}:void 0,n=e.log,r=e.__nativeTags,o=e.__platform,s=e.__netlessUA,w=(e.initializeOriginsStates,e.useMultiViews),S=e.userCursor,P=(e.enableInterrupterAPI,e.routeBackup,e.enableRtcIntercept),j=e.enableImgErrorCallback,k=e.enableIFramePlugin,O=e.enableSyncedStore,C=W(e,["log","__nativeTags","__platform","__netlessUA","initializeOriginsStates","useMultiViews","userCursor","enableInterrupterAPI","routeBackup","enableRtcIntercept","enableImgErrorCallback","enableIFramePlugin","enableSyncedStore"]);(0,v.enableReport)(!!n),K=e,o&&(window.__platform=o),s&&(window.__netlessUA=s.join(" ")),j&&(0,a.hookCreateElement)(),$=S?new i.CursorTool:void 0,r&&(window.__nativeTags=B(B({},window.__nativeTags),r));var M=C.pptParams||{};P&&(M.rtcClient=G,(0,m.usePlugin)(new g.RTCPlugin(G)));var E,_=[],A=R(window.pluginParams||[]);try{for(A.s();!(E=A.n()).done;){var I=E.value,T=F({},I.name,window[I.variable]);_.push(T)}}catch(e){A.e(e)}finally{A.f()}var N=(0,c.createPlugins)(B({video:u.videoPlugin,audio:l.audioPlugin,video2:f.videoPlugin2,audio2:d.audioPlugin2,"video.js":(0,p.videoJsPlugin)({log:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.logger.apply(void 0,["videoJsPlugin",e].concat(n))}})},_));N.setPluginContext("video.js",{enable:!1,verbose:!0});var D,L=R(window.pluginContext||[]);try{for(L.s();!(D=L.n()).done;){var U=D.value;N.setPluginContext(U.name,U.params)}}catch(e){L.e(e)}finally{L.f()}window.plugins=N;var z;y.WindowManager.register({kind:"Slide",appOptions:{debug:!1},addHooks:m.addHooks,src:(z=J(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.default);case 1:case"end":return e.stop()}}),e)}))),function(){return z.apply(this,arguments)})});var V,X=R(window.appRegisterParams||[]);try{for(X.s();!(V=X.n()).done;){var Z=V.value;y.WindowManager.register({kind:Z.kind,appOptions:Z.appOptions,src:Z.variable?window[Z.variable]:Z.url})}}catch(e){X.e(e)}finally{X.f()}var Y=O||k||w,Q=[].concat(x(k?[b.IframeBridge]:[]),x(O?[h.SyncedStorePlugin]:[]));try{H=new c.WhiteWebSdk(B(B({},C),{},{invisiblePlugins:Q,wrappedComponents:k?[b.IframeWrapper]:void 0,plugins:N,urlInterrupter:t,onWhiteSetupFailed:function(e){q.onSetupFail(e)},pptParams:M,useMobXState:Y})),window.sdk=H}catch(e){q.onSetupFail(e)}})),F(this,"joinRoom",(function(e,t){if(H){Y();e.timeout;var n=e.cameraBound,r=e.windowParams,o=e.disableCameraTransform,a=e.nativeWebSocket,i=W(e,["timeout","cameraBound","windowParams","disableCameraTransform","nativeWebSocket"]),s=K,c=s.useMultiViews,u=s.enableSyncedStore,l=x(c?[y.WindowManager]:[]);window.nativeWebSocket=a;var f=new P.RoomCallbackHandler;H.joinRoom(B(B({useMultiViews:c,disableCameraTransform:o},i),{},{invisiblePlugins:l,cursorAdapter:c?void 0:$,cameraBound:(0,w.convertBound)(n),disableMagixEventDispatchLimit:c}),B(B({},f),q)).then(function(){var e=J(regeneratorRuntime.mark((function e(n){var a,i,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(),a=(z=n).state,!c){e.next=18;break}return e.prev=4,i=te(r),s=B(B({},r),{},{viewMode:i,room:z}),e.next=9,Q(s,f);case 9:l=e.sent,a=B(B(B({},a),{windowBoxState:l.boxState}),{},{cameraState:l.cameraState,sceneState:l.sceneState},{pageState:l.pageState}),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",t(JSON.stringify({__error:{message:e.t0.message,jsStack:e.t0.stack}})));case 16:e.next=21;break;case 18:z.bindHtmlElement(U()),$&&$.setRoom(z),a=B(B({},a),(0,j.createPageState)(a.sceneState));case 21:if(!u){e.next=24;break}return e.next=24,(0,A.initSyncedStore)(z);case 24:return(0,C.registerBridgeRoom)(z),o&&(z.disableCameraTransform=o),e.abrupt("return",t(JSON.stringify({state:a,observerId:z.observerId,isWritable:z.isWritable})));case 27:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}))}else t(JSON.stringify({__error:{message:"sdk init failed"}}))})),F(this,"replayRoom",(function(e,t){var n;if(H){var r=e.step,o=void 0===r?500:r,a=e.cameraBound,i=e.mediaURL,s=(e.windowParams,W(e,["step","cameraBound","mediaURL","windowParams"]));Y();var u,l=K,f=l.useMultiViews,d=l.enableSyncedStore;u=new k.ReplayerCallbackHandlerImp(o,!!i,!!(null===(n=K)||void 0===n?void 0:n.enableIFramePlugin),(function(t,n){var r;if((n===c.PlayerPhase.Pause||n===c.PlayerPhase.Playing)&&(null===(r=K)||void 0===r?void 0:r.useMultiViews)&&null===t.getInvisiblePlugin(y.WindowManager.kind)&&!window.manager){var o=t,a=e.windowParams;setTimeout((function(){var e=te(a);Q(B(B({},a),{},{room:o,viewMode:e}),u).catch((function(e){console.error("mount error",e)}))}),0)}})),H.replayRoom(B(B({},s),{},{cursorAdapter:f?void 0:$,cameraBound:(0,w.convertBound)(a),invisiblePlugins:f?[y.WindowManager]:[],useMultiViews:f}),B(B({},u),q)).then(function(){var e=J(regeneratorRuntime.mark((function e(n){var r,o,a,s,c,l,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(),V=n,f||(n.bindHtmlElement(U()),$&&(null===(r=$)||void 0===r||r.setPlayer(V))),!d){e.next=6;break}return e.next=6,(0,A.initSyncedStore)(V);case 6:return i?((o=document.createElement("video")).setAttribute("x5-video-player-type","h5-page"),o.setAttribute("playsInline",""),o.setAttribute("style","display:none;"),o.setAttribute("class","video-js"),document.body.appendChild(o),a=new O.default(V,{url:i,videoDOM:o}),s=a.create(),(0,M.registerPlayerBridge)(n,s,k.lastSchedule,u)):(0,M.registerPlayerBridge)(n,void 0,k.lastSchedule,u),c=n.progressTime,l=n.timeDuration,p=n.framesCount,m=n.beginTimestamp,e.abrupt("return",t(JSON.stringify({timeInfo:{scheduleTime:c,timeDuration:l,framesCount:p,beginTimestamp:m}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return t(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}))}else t(JSON.stringify({__error:{message:"sdk init failed"}}))})),F(this,"isPlayable",(function(e,t){if(H){e.step,e.cameraBound;var n=W(e,["step","cameraBound"]);H.isPlayable(B({},n)).then((function(e){t(e)}))}else t(!1)})),F(this,"asyncInsertFontFaces",(function(e,t){var n,r=R(e);try{var o=function(){var e=n.value,r=e["font-weight"],o=e["font-style"],a=e["unicode-range"],i=JSON.parse(JSON.stringify({weight:r,style:o,unicodeRange:a})),s=new FontFace(e["font-family"],e.src,i);s.load().then((function(n){(0,v.logger)("asyncInsertFontFaces load font success",e),document.fonts.add(s),t({success:!0,fontFace:e})})).catch((function(n){(0,v.logger)("asyncInsertFontFaces load font failed",e),t({success:!1,fontFace:e,error:n})}))};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}})),F(this,"updateNativeFontFaceCSS",(function(e){var t=document.getElementById(Z);t||((t=document.createElement("style")).id=Z,document.body.appendChild(t));var n=e.map((function(e){var t=Object.keys(e).reduce((function(t,n){return e[n].includes(" ")?"".concat(t,"\n").concat(n,': "').concat(e[n],'";'):"".concat(t,"\n").concat(n,": ").concat(e[n],";")}),"");return"@font-face {\n                ".concat(t,"\n            }")}));t.innerHTML=n.join("\n")})),F(this,"updateNativeTextareaFont",(function(e){var t=document.getElementById(X);t||((t=document.createElement("style")).id=X,document.body.appendChild(t));var n=e.map((function(e){return'"'.concat(e,'"')})).join(",");t.innerHTML=".netless-whiteboard textarea {\n            font-family: ".concat(n,"; \n        }")})),F(this,"nativeLog",(function(e,t){t()})),F(this,"registerApp",(function(e,t){if(e.javascriptString){var n=e.variable,r=Function("\n                    ".concat(e.javascriptString,";\n                    if (typeof ").concat(n,' == "undefined") {\n                        return undefined; \n                    } else {\n                        return ').concat(n,";\n                    } \n                    "))();if(!r)return void t(JSON.stringify({__error:{message:"variable does not exist"}}));y.WindowManager.register({kind:e.kind,src:r,appOptions:e.appOptions}).then((function(){return t()}))}else e.url&&y.WindowManager.register({kind:e.kind,src:e.url,appOptions:e.appOptions}).then((function(){return t()}))}))}},97839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSyncedStore=function(e){return m.apply(this,arguments)},t.destroySyncedStore=function(){var e;p.clear(),null===(e=window.syncedStore)||void 0===e||e.destroy(),window.syncedStore=void 0},t.StoreBridge=t.StoreAsyncBridge=void 0;var r=n(99711),o=n(70396),a=n(28388),i=n(38789);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)}))}}var f="store",d="store",p=new Map;function m(){return(m=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.SyncedStorePlugin.init(t);case 2:return n=e.sent,window.syncedStore=n,(0,o.register)(f,new y(n)),(0,o.registerAsyn)(d,new g(n)),(0,a.addBridgeLogHook)([f],i.logger),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function e(t){var n=this;s(this,e),this.syncedStore=t,c(this,"connectStorage",(function(e,t,r){if(p.has(e))r(JSON.stringify(p.get(e).state));else try{var a=n.syncedStore.connectStorage(e,t);a.on("stateChanged",(function(t){(0,o.call)("store.fireSyncedStoreUpdate",JSON.stringify({name:e,data:t}))})),p.set(e,a),r(JSON.stringify(a.state))}catch(e){r(JSON.stringify({__error:{message:e.message,jsStack:e.stack}}))}})),c(this,"getStorageState",(function(e,t){var n=p.get(e);return t(JSON.stringify((null==n?void 0:n.state)||{}))}))};t.StoreAsyncBridge=g;var y=function e(t){s(this,e),this.syncedStore=t,c(this,"disconnectStorage",(function(e){var t=p.get(e);null==t||t.disconnect(),p.delete(e)})),c(this,"deleteStorage",(function(e){var t=p.get(e);null==t||t.deleteStorage(),p.delete(e)})),c(this,"resetState",(function(e){var t=p.get(e);null==t||t.resetState()})),c(this,"setStorageState",(function(e,t){var n=p.get(e);null==n||n.setState(t)}))};t.StoreBridge=y},70396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAsyn=t.register=t.syncCall=t.call=void 0;var r,o=n(25608);window.ReactNativeWebView?(r=new o.RNBridge,window.bridge=r):window.bridge=o.bridge;t.call=function(e,t){r?r.call(e,t):o.bridge.call(e,t)};t.syncCall=function(e,t){return r?t:o.bridge.syncCall(e,t)};t.register=function(e,t){r?r.register(e,t):o.bridge.register(e,t)};t.registerAsyn=function(e,t){r?r.registerAsyn(e,t):o.bridge.registerAsync(e,t)}},36037:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(82526),n(41817),n(72443),n(92401),n(8722),n(32165),n(69007),n(83510),n(41840),n(6982),n(32159),n(96649),n(39341),n(60543),n(92222),n(50545),n(26541),n(43290),n(57327),n(69826),n(34553),n(84944),n(86535),n(89554),n(91038),n(26699),n(82772),n(66992),n(94986),n(21249),n(26572),n(85827),n(96644),n(65069),n(47042),n(5212),n(2707),n(38706),n(40561),n(33792),n(99244),n(18264),n(76938),n(39575),n(5735),n(96078),n(4855),n(73706),n(51532),n(99752),n(82376),n(73181),n(23484),n(2388),n(88621),n(60403),n(84755),n(25438),n(40658),n(40197),n(44914),n(52420),n(60160),n(60970),n(10408),n(73689),n(9653),n(93299),n(33161),n(78285),n(44363),n(55994),n(61874),n(9494),n(19601),n(59595),n(35500),n(69720),n(43371),n(38559),n(38880),n(49337),n(36210),n(30489),n(41825),n(98410),n(72200),n(47941),n(94869),n(33952),n(57227),n(60514),n(68304),n(41539),n(26833),n(54678),n(91058),n(88674),n(17727),n(36535),n(12419),n(69596),n(52586),n(74819),n(95683),n(39361),n(51037),n(5898),n(67556),n(14361),n(83593),n(39532),n(24603),n(74916),n(92087),n(39714),n(70189),n(79841),n(27852),n(94953),n(32023),n(78783),n(4723),n(66528),n(83112),n(38992),n(82481),n(15306),n(64765),n(23123),n(23157),n(73210),n(48702),n(55674),n(44197),n(76495),n(87145),n(35109),n(65125),n(82472),n(49743),n(8255),n(29135),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(98145),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(95206),n(29368),n(14483),n(12056),n(30678),n(27462),n(33824),n(12974),n(15016),n(4129),n(38478),n(54747),n(33948),n(84633),n(85844),n(60285),n(83753),n(41637),n(35666),n(59048),n(87670),n(32407);var o,a=d(n(67294)),i=d(n(73935)),s=(o=n(6167))&&o.__esModule?o:{default:o},c=n(24433),u=n(10097),l=n(5294);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}i.render(a.createElement(s.default,null),document.getElementById("root")),(0,l.registerSDKBridge)(),window.registerApp=u.WindowManager.register,(0,c.addDebugFunctions)()},36289:function(e,t,n){"use strict";var r=d(n(98422)),o=d(n(95855)),a=n(10097),i=d(n(21537)),s=d(n(58077)),c=d(n(41497)),u=d(n(17722)),l=d(n(2693)),f=d(n(41893));function d(e){return e&&e.__esModule?e:{default:e}}a.WindowManager.register({kind:"GeoGebra",src:r.default,appOptions:{HTML5Codebase:"https://flat-storage-cn-hz.whiteboard.agora.io/GeoGebra/HTML5/5.0/web3d"}}),a.WindowManager.register({kind:"Monaco",appOptions:{loader:{paths:{vs:"https://flat-storage.oss-cn-hangzhou.aliyuncs.com/flat-resources/library/monaco-editor@0.27.0/min/vs"}}},src:o.default}),a.WindowManager.register({kind:"Countdown",src:i.default}),a.WindowManager.register({kind:"Selector",src:s.default}),a.WindowManager.register({kind:"Dice",src:c.default}),a.WindowManager.register({kind:"MindMap",src:u.default}),a.WindowManager.register({kind:"Quill",src:l.default}),a.WindowManager.register({kind:"IframeBridge",src:f.default})},15748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayerCallbackHandlerImp=t.lastSchedule=void 0;var r=n(70396),o=n(63314),a=n(89774),i=n(38789);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={time:0};t.lastSchedule=c;var u,l=!1;t.ReplayerCallbackHandlerImp=function e(t,n,f,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"onPhaseChanged",(function(e){})),s(this,"onLoadFirstFrame",(function(){(0,r.call)("player.onPlayerStateChanged",JSON.stringify(window.player.state)),(0,r.call)("player.onLoadFirstFrame"),l&&(0,a.postIframeMessage)({eventName:"onLoadFirstFrame",params:[]},i.logger)})),s(this,"onPlayerStateChanged",(function(e){window.manager&&e.sceneState||((0,r.call)("player.onPlayerStateChanged",JSON.stringify(e)),l&&(0,a.postIframeMessage)({eventName:"onPlayerStateChanged",params:[e]},i.logger))})),s(this,"onStoppedWithError",(function(e){(0,r.call)("player.onStoppedWithError",JSON.stringify({error:e.message,jsStack:e.stack})),l&&(0,a.postIframeMessage)({eventName:"onStoppedWithError",params:[e]},i.logger)})),s(this,"onProgressTimeChanged",(function(e){!function(e,t,n){var r=window.player;void 0!==r&&(t>=c.time?(e(),c.time=Math.ceil(t/n)*n):r&&t+n>r.timeDuration&&(e(),c.time=t))}((function(){(0,r.call)("player.onScheduleTimeChanged",e)}),e,u),l&&(0,a.postIframeMessage)({eventName:"onProgressTimeChanged",params:[e]},i.logger)})),s(this,"onCatchErrorWhenAppendFrame",(function(e,t){})),s(this,"onCatchErrorWhenRender",(function(e){(0,r.call)("player.onCatchErrorWhenRender",{error:e.message})})),l=f,u=t,this.onPhaseChanged=function(e){var t=window.player;if(void 0!==t){d(t,e);var s=function(e){c.time=0,(0,r.call)("player.onPhaseChanged",e),l&&(0,a.postIframeMessage)({eventName:"onPhaseChanged",params:[e]},i.logger)};n&&e!==o.PlayerPhase.WaitingFirstFrame&&e!==o.PlayerPhase.Stopped||s(e)}}}},42470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoomCallbackHandler=void 0;var r=n(38789),o=n(70396),a=n(28388),i=n(63314);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.RoomCallbackHandler=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"onPhaseChanged",(function(e){(0,o.call)("room.firePhaseChanged",e);var t=window.room;t&&t.phase===i.RoomPhase.Reconnecting&&setTimeout((function(){t&&t.phase===i.RoomPhase.Reconnecting&&((0,r.logger)("room start disconnect by reconnecting timeout by bridge"),t.disconnect().then((function(){var e="Reconnect time exceeds ".concat(45e3," milliseconds, sdk call disconnect automatically");(0,r.logger)(e),(0,o.call)("room.fireDisconnectWithError",e)})))}),45e3)})),l(this,"onCanUndoStepsUpdate",(function(e){(0,o.call)("room.fireCanUndoStepsUpdate",e)})),l(this,"onCanRedoStepsUpdate",(function(e){(0,o.call)("room.fireCanRedoStepsUpdate",e)})),l(this,"onRoomStateChanged",(function(e){var t=e,n=t.sceneState,r=u(t,["sceneState"]);window.manager?0!==Object.keys(r).length&&(0,o.call)("room.fireRoomStateChanged",JSON.stringify(r)):(n&&(e=c(c({},e),(0,a.createPageState)(n))),(0,o.call)("room.fireRoomStateChanged",JSON.stringify(e)))})),l(this,"onDisconnectWithError",(function(e){(0,o.call)("room.fireDisconnectWithError",e.message)})),l(this,"onKickedWithReason",(function(e){(0,o.call)("room.fireKickedWithReason",e)})),l(this,"onCatchErrorWhenAppendFrame",(function(e,t){(0,r.logger)("onCatchErrorWhenAppendFrame",[e,t.message]),(0,o.call)("room.fireCatchErrorWhenAppendFrame",{userId:e,error:t.message})})),l(this,"onCatchErrorWhenRender",(function(e){}))}},25219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKCallbackHandler=void 0;var r=n(70396);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.SDKCallbackHandler=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"onPostMessage",(function(e){(0,r.call)("sdk.postMessage",e)})),o(this,"onThrowError",(function(e){(0,r.call)("sdk.throwError",e)})),o(this,"onLogger",(function(e){(0,r.call)("sdk.logger",e)})),o(this,"onUrlInterrupter",(function(e){return(0,r.syncCall)("sdk.urlInterrupter",e)})),o(this,"onSetupFail",(function(e){(0,r.call)("sdk.setupFail",{message:e.message,jsStack:e.stack})})),o(this,"onPPTLoadProgress",(function(e,t){})),o(this,"onPPTMediaPlay",(function(e,t){console.log("onPPTMediaPlay"),(0,r.call)("sdk.onPPTMediaPlay",{shapeId:e,type:t})})),o(this,"onPPTMediaPause",(function(e,t){(0,r.call)("sdk.onPPTMediaPause",{shapeId:e,type:t})}))}},51126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBound=function(e){if(!e)return;return{centerX:e.centerX,centerY:e.centerY,width:e.width,height:e.height,maxContentMode:a(e.maxContentMode),minContentMode:a(e.minContentMode)}};var r=n(63314),o=n(11358);function a(e){if(e){var t=void 0===e.scale?1:e.scale,n=void 0===e.space?0:e.space;o.ScaleMode.Scale;switch("string"==typeof e.mode?parseInt(o.ScaleMode[e.mode]):e.mode){case o.ScaleMode.Scale:return(0,r.contentModeScale)(t);case o.ScaleMode.AspectFill:return(0,r.contentModeAspectFill)();case o.ScaleMode.AspectFillScale:return(0,r.contentModeAspectFillScale)(t);case o.ScaleMode.AspectFit:return(0,r.contentModeAspectFit)();case o.ScaleMode.AspectFitScale:return(0,r.contentModeAspectFitScale)(t);case o.ScaleMode.AspectFitSpace:return(0,r.contentModeAspectFitSpace)(n);default:return}}}},28388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addBridgeLogHook=function(e,t){function n(e){return e.keys&&e.keys()||Object.getOwnPropertyNames(e)}function r(e,t){return e.get&&e.get(t)||e[t]}var o,s=void 0!==window.ReactNativeWebView,c=s?window.bridge.asyncMethods:window.bridge.registerMap.async,u=i(n(c));try{for(u.s();!(o=u.n()).done;){var l=o.value;if(e.includes(l)){var f,d=r(c,l),p=i(Object.getOwnPropertyNames(d));try{var m=function(){var e=f.value,n=d[e];if("function"!=typeof n)return"continue";d[e]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];try{return n.apply(void 0,o)}finally{t.apply(void 0,[e].concat(a(o.slice(0,-1))))}}};for(p.s();!(f=p.n()).done;)m()}catch(e){p.e(e)}finally{p.f()}}}}catch(e){u.e(e)}finally{u.f()}var g,y=s?window.bridge.methods:window.bridge.registerMap.normal,h=i(n(y));try{for(h.s();!(g=h.n()).done;){var b=g.value;if(e.includes(b)){var v,w=r(y,b),S=i(Object.getOwnPropertyNames(w));try{var P=function(){var e=v.value,n=w[e];if("function"!=typeof n)return"continue";w[e]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];try{return n.apply(void 0,o)}finally{t.apply(void 0,[e].concat(o))}}};for(S.s();!(v=S.n()).done;)P()}catch(e){S.e(e)}finally{S.f()}}}}catch(e){h.e(e)}finally{h.f()}},t.isRoom=function(e){return void 0===e.roomUUID},t.globalErrorEvent=function(e){o.sdkCallbackHandler.onThrowError({message:e.message,error:e.error})},t.createPageState=function(e){if(e){var t=e.scenes.map((function(e){return e.name}));return{pageState:{index:e.index,length:e.scenes.length,pages:t}}}return{}},t.postCustomMessage=function(e){var t=e.data;"pptImageLoadError"===t.name&&o.sdkCallbackHandler.onPostMessage(JSON.stringify(t));"iframe"===t.name&&o.sdkCallbackHandler.onPostMessage(JSON.stringify(t));t.shapeId&&t.mediaType&&t.action&&o.sdkCallbackHandler.onPostMessage(JSON.stringify(t));t.customMessage&&o.sdkCallbackHandler.onPostMessage(JSON.stringify(t))},t.usePrevious=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current};var r=n(67294),o=n(5294);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=s(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},54505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hookCreateElement=function(){var e=document.createElement;if(e.toString().includes('addEventListener("error"'))return;console.log("interrupt document.createElement success"),document.createElement=function(t,n){var r=e.call(this,t,n);return"IMG"===r.nodeName&&(r.addEventListener("error",o,{once:!0}),r.addEventListener("unload",(function(){r.removeEventListener("error",o)}))),r}};var r=n(28388);function o(e){var t={error:e,message:e.message,src:this.currentSrc,customMessage:!0,name:"imageLoadError"};(0,r.postCustomMessage)({data:t})}},38789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableReport=function(e){s=e},t.logger=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,[e].concat(r)),l.apply(void 0,[s,e].concat(r))};var r=n(5294);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=!1;var c=[];function u(){c.forEach((function(e){var t;window.room&&(t=window.room.logger).info.apply(t,a(e))})),c=[]}function l(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var l,f=i.map((function(e){return"object"===o(e)?(e.hasOwnProperty("roomToken")&&(e.roomToken="***"),JSON.stringify(e)):e}));if(window.room){var d;(d=window.room.logger).info.apply(d,[t].concat(a(f))),c.length>0&&u()}else{var p=[t].concat(a(f));c.push(p)}l=0===i.length?void 0:1===i.length?i[0]:i.every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?i.join(" "):i,e&&r.sdkCallbackHandler.onLogger({funName:t,params:l})}},89774:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postIframeMessage=function(e,t){var n={name:"parentWindow",payload:e},r=document.getElementsByTagName("iframe");if(r.length>0&&r[0].contentWindow){r[0].contentWindow.postMessage(n,"*")}else 0==r.length?null==t||t("postmessage fail","no frames exist"):null==t||t("postmessage fail","no conentWindow")}},25893:function(){},75042:function(){},65586:function(){}},function(e){e.O(0,[378,83,791,736],(function(){return t=36037,e(e.s=t);var t}));e.O()}]);